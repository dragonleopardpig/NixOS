  ~/Downloads/NixOS/  (git root)
  ├── emacs/language.el
  │   ├── envrc-global-mode          ← activates .envrc per-buffer
  │   ├── lsp-bridge-python-command  ← python/.devenv/state/venv/bin/python
  │   │                                 (lsp-bridge's own backend, shared by all)
  │   ├── global PATH additions:
  │   │   ├── cpp/.devenv/profile/bin    → clangd
  │   │   ├── rust/.devenv/profile/bin   → rust-analyzer
  │   │   └── python/.devenv/profile/bin → basedpyright
  │   └── global-lsp-bridge-mode     ← starts lsp-bridge for all buffers
  │
  ├── cpp/
  │   ├── .envrc → devenv.nix
  │   │   └── languages.cplusplus.enable = true  → provides clang++, clangd
  │   │       packages: cmake, pkg-config, enchant
  │   ├── .dir-locals.el        ← tells lsp-bridge project root is cpp/ (not NixOS/)
  │   ├── .clangd               ← MUST be a file, not directory
  │   │   └── CompileFlags.Add: -isystem paths to gcc/glibc headers
  │   ├── CMakeLists.txt        ← generates compile_commands.json
  │   ├── compile_commands.json ← clangd reads this for compile flags
  │   └── cpp.cpp
  │
  ├── python/
  │   ├── .envrc → devenv.nix
  │   │   └── languages.python.enable  → provides python, pip
  │   │       basedpyright in devenv   → LSP server
  │   ├── (no .dir-locals.el needed)
  │   ├── (no compile_commands.json)
  │   └── *.py  ← basedpyright finds project via .envrc/devenv
  │
  └── rust/
      ├── .envrc → devenv.nix
      │   └── languages.rust.enable    → provides rustc, cargo, rust-analyzer
      ├── (no .dir-locals.el needed)
      ├── Cargo.toml             ← rust-analyzer finds project via this
      └── src/*.rs

  Key differences:
    C++:    clangd needs .dir-locals.el + .clangd + compile_commands.json
    Python: basedpyright just works (finds project from .envrc)
    Rust:   rust-analyzer just works (finds project from Cargo.toml)

  C++ has the most complex setup because clangd on NixOS needs:
  1. Project root — .dir-locals.el (otherwise lsp-bridge reports the git root)
  2. Compile database — compile_commands.json (tells clangd how to compile)
  3. System headers — .clangd file with -isystem paths (NixOS doesn't have /usr/include